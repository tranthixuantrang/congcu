<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Minimart ‚Äî Qu·∫£n l√Ω s·∫£n ph·∫©m</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --sidebar-bg:#0b1220;
      --sidebar-text:#e5e7eb;
      --primary:#2563eb;
      --primary-dark:#1d4ed8;
      --border:#e5e7eb;
      --bg:#f3f4f6;
      --text:#111827;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: Inter, sans-serif;
    }

    body {
      display: grid;
      grid-template-columns: 240px 1fr;
      min-height: 100vh;
      background: var(--bg);
      color: var(--text);
    }

    /* Sidebar */
    .sidebar {
      background: var(--sidebar-bg);
      color: var(--sidebar-text);
      padding: 20px 16px;
      display: flex;
      flex-direction: column;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    .brand .cube {
      width: 40px;
      height: 40px;
      display: grid;
      place-items: center;
      background: #2563eb22;
      border: 1px solid #1f2a44;
      color: #60a5fa;
      border-radius: 12px;
      font-size: 20px;
    }

    .brand h1 {
      font-size: 18px;
      font-weight: 700;
      color: #fff;
    }

    nav.menu {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    nav.menu a {
      padding: 10px 12px;
      border-radius: 10px;
      color: #cbd5e1;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    nav.menu a:hover,
    nav.menu a.active {
      background: #1d2a4a;
      color: #fff;
    }

    .logout {
      margin-top: auto;
    }

    .logout a {
      color: #f87171;
      font-weight: 600;
      text-decoration: none;
    }

    /* Main */
    .main {
      padding: 0 24px 24px;
      overflow-x: hidden;
    }

    h2 {
      margin: 20px 0 8px;
    }

    .card {
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      padding: 20px;
      margin-top: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th, td {
      border-bottom: 1px solid #e5e7eb;
      padding: 10px;
      text-align: left;
      font-size: 14px;
    }

    th {
      background: #f1f5f9;
    }

    .actions-inline {
      display: flex;
      gap: 8px;
      justify-content: center;
    }

    .btn {
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
    }

    .btn.primary {
      background: var(--primary);
      color: #fff;
    }

    .btn.danger {
      background: #dc2626;
      color: #fff;
    }

    .badge {
      padding: 3px 8px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
    }

    .badge.success {
      background: #bbf7d0;
      color: #166534;
    }

    .badge.danger {
      background: #fecaca;
      color: #991b1b;
    }

    select, input {
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #d1d5db;
    }

    .toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    form.add-form {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    form.add-form input,
    form.add-form select {
      flex: 1;
      min-width: 150px;
    }
  </style>
</head>

<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="brand">
      <div class="cube">‚ñ£</div>
      <div>
        <h1>Minimart</h1>
        <p>H·ªá th·ªëng qu·∫£n l√Ω</p>
      </div>
    </div>
    <nav class="menu" id="sidebarMenu">
      <!-- render b·∫±ng JS -->
    </nav>
    <div class="logout">
      <a href="FE_DangNhap.html">‚Ü™ ƒêƒÉng xu·∫•t</a>
    </div>
  </aside>

  <!-- Main -->
  <main class="main">
    <h2>Qu·∫£n l√Ω s·∫£n ph·∫©m</h2>
    <p>Theo d√µi v√† qu·∫£n l√Ω danh s√°ch s·∫£n ph·∫©m</p>

    <div class="card">
      <div class="toolbar">
        <div>
          <label for="filterCategory"><b>L·ªçc danh m·ª•c: </b></label>
          <select id="filterCategory">
            <option value="all">T·∫•t c·∫£</option>
            <option value="Ph·ª• ki·ªán">Ph·ª• ki·ªán</option>
            <option value="M√†n h√¨nh">M√†n h√¨nh</option>
            <option value="√Çm thanh">√Çm thanh</option>
            <option value="L∆∞u tr·ªØ">L∆∞u tr·ªØ</option>
          </select>
        </div>
        <div>
          <button class="btn danger" onclick="resetData()">‚Ü∫ Reset d·ªØ li·ªáu</button>
        </div>
      </div>

      <!-- Form th√™m s·∫£n ph·∫©m -->
      <form class="add-form" onsubmit="handleAdd(event)">
        <input type="text" id="name" placeholder="T√™n s·∫£n ph·∫©m" required>
        <select id="category" required>
          <option value="Ph·ª• ki·ªán">Ph·ª• ki·ªán</option>
          <option value="M√†n h√¨nh">M√†n h√¨nh</option>
          <option value="√Çm thanh">√Çm thanh</option>
          <option value="L∆∞u tr·ªØ">L∆∞u tr·ªØ</option>
        </select>
        <input type="number" id="price" placeholder="Gi√° (ƒë)" required>
        <input type="number" id="quantity" placeholder="S·ªë l∆∞·ª£ng" required>
        <select id="status" required>
          <option value="C√≤n h√†ng">C√≤n h√†ng</option>
          <option value="H·∫øt h√†ng">H·∫øt h√†ng</option>
        </select>
        <button class="btn primary" type="submit">Ôºã Th√™m</button>
      </form>

      <!-- Danh s√°ch s·∫£n ph·∫©m -->
      <div id="productList"></div>
    </div>
  </main>

  <script>
    // Sidebar
    const role = localStorage.getItem("role") || "guest";
    const sidebarMenu = document.getElementById("sidebarMenu");

    if (role === "admin") {
      sidebarMenu.innerHTML = `
        <a href="FE_TrangChu.html">üè† Trang ch·ªß</a>
        <a class="active" href="FE_QuanLySanPham.html">üì¶ Qu·∫£n l√Ω s·∫£n ph·∫©m</a>
        <a href="FE_QuanLyKho.html">üè¨ Qu·∫£n l√Ω kho</a>
        <a href="FE_QuanLyTaiKhoan.html">üë• Qu·∫£n l√Ω t√†i kho·∫£n</a>
        <a href="FE_QuanLyNguoiDung.html">üßë‚Äçüíª Qu·∫£n l√Ω ng∆∞·ªùi d√πng</a>
        <a href="#">üßæ H√≥a ƒë∆°n</a>
        <a href="#">‚öôÔ∏è C√†i ƒë·∫∑t</a>
      `;
    } else {
      sidebarMenu.innerHTML = `
        <a href="FE_TrangChu.html">üè† Trang ch·ªß</a>
        <a class="active" href="FE_QuanLySanPham.html">üõí S·∫£n ph·∫©m</a>
        <a href="#">üìû Th√¥ng tin li√™n h·ªá</a>
        <a href="#">üè¨ Danh s√°ch c·ª≠a h√†ng</a>
      `;
    }

    // L·∫•y / l∆∞u d·ªØ li·ªáu
    function getProducts() {
      return JSON.parse(localStorage.getItem("products")) || [];
    }

    function saveProducts(products) {
      localStorage.setItem("products", JSON.stringify(products));
    }

    // Render s·∫£n ph·∫©m
    function renderProducts() {
      const products = getProducts();
      const filter = document.getElementById("filterCategory").value;
      const container = document.getElementById("productList");

      const grouped = {};
      products.forEach(p => {
        if (filter === "all" || p.category === filter) {
          if (!grouped[p.category]) grouped[p.category] = [];
          grouped[p.category].push(p);
        }
      });

      let html = "";
      for (const category in grouped) {
        html += `<h3 style="color:#2563eb">${category}</h3>`;
        html += `
          <table>
            <thead>
              <tr>
                <th>M√£ SP</th>
                <th>T√™n s·∫£n ph·∫©m</th>
                <th>Gi√°</th>
                <th>S·ªë l∆∞·ª£ng</th>
                <th>Tr·∫°ng th√°i</th>
                <th>Thao t√°c</th>
              </tr>
            </thead>
            <tbody>
        `;
        grouped[category].forEach(p => {
          html += `
            <tr>
              <td>${p.id}</td>
              <td>${p.name}</td>
              <td>${p.price.toLocaleString()} ƒë</td>
              <td>${p.quantity}</td>
              <td>
                <span class="badge ${p.status === "C√≤n h√†ng" ? "success" : "danger"}">
                  ${p.status}
                </span>
              </td>
              <td class="actions-inline">
                <button onclick="viewProduct('${p.id}')">üëÅÔ∏è</button>
                <button onclick="editProduct('${p.id}')">‚úèÔ∏è</button>
                <button onclick="deleteProduct('${p.id}')">üóëÔ∏è</button>
              </td>
            </tr>
          `;
        });
        html += "</tbody></table>";
      }

      container.innerHTML = html || "<p>Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</p>";
    }

    // Th√™m s·∫£n ph·∫©m
    function handleAdd(e) {
      e.preventDefault();
      const products = getProducts();
      const newProduct = {
        id: crypto.randomUUID().slice(0, 6).toUpperCase(),
        name: document.getElementById("name").value,
        category: document.getElementById("category").value,
        price: parseInt(document.getElementById("price").value),
        quantity: parseInt(document.getElementById("quantity").value),
        status: document.getElementById("status").value
      };
      products.push(newProduct);
      saveProducts(products);
      e.target.reset();
      renderProducts();
    }

    // Xo√° s·∫£n ph·∫©m
    function deleteProduct(id) {
      let products = getProducts();
      products = products.filter(p => p.id !== id);
      saveProducts(products);
      renderProducts();
    }

    // Reset to√†n b·ªô d·ªØ li·ªáu
    function resetData() {
      localStorage.removeItem("products");
      renderProducts();
    }

    // Xem chi ti·∫øt (demo)
    function viewProduct(id) {
      const products = getProducts();
      const p = products.find(x => x.id === id);
      alert(`üìå ${p.name} ‚Äî ${p.price.toLocaleString()} ƒë`);
    }

    // S·ª≠a s·∫£n ph·∫©m (demo)
    function editProduct(id) {
      const products = getProducts();
      const p = products.find(x => x.id === id);
      const newName = prompt("Nh·∫≠p t√™n m·ªõi:", p.name);
      if (newName) {
        p.name = newName;
        saveProducts(products);
        renderProducts();
      }
    }

    // L·ªçc theo danh m·ª•c
    document.getElementById("filterCategory").addEventListener("change", renderProducts);

    // D·ªØ li·ªáu m·∫´u
    if (!localStorage.getItem("products")) {
      saveProducts([
        { id: "SP001", name: "Chu·ªôt gaming RGB X5", category: "Ph·ª• ki·ªán", price: 399000, quantity: 20, status: "C√≤n h√†ng" },
        { id: "SP002", name: "M√†n h√¨nh 27'' 2K 165Hz", category: "M√†n h√¨nh", price: 4990000, quantity: 5, status: "C√≤n h√†ng" },
        { id: "SP003", name: "Tai nghe kh√¥ng d√¢y A1", category: "√Çm thanh", price: 1290000, quantity: 0, status: "H·∫øt h√†ng" },
        { id: "SP004", name: "·ªî c·ª©ng SSD NVMe 1TB", category: "L∆∞u tr·ªØ", price: 1690000, quantity: 12, status: "C√≤n h√†ng" }
      ]);
    }

    renderProducts();
  </script>
</body>
</html>
